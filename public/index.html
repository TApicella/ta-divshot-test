<html>
  <head>
    <script src='https://cdn.firebase.com/js/client/2.0.4/firebase.js'></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  </head>
  <body>
    <script>
      $(document).ready(function(){
        alert("Starting script");
        alert("Checking FB connection");
        var fbRef = new Firebase('https://ta-divshot-test.firebaseio.com/');  
        if(fbRef != null){
          alert("FB found");
        }
        else{ 
          alert("FB null");
        }

        alert("Testing if visits exists");
        fbRef.child("visits").once('value', function(snapshot){
          var exists = (snapshot.val() !== null);
          if(!exists){
            alert("Visits does not exist");
            alert("Adding visits"); 
            fbRef.set({visits: 0});
          }
          else{
            alert("Visits exists");
            alert(snapshot.val()); 
          }
        });
        /* 
        var myDataRef = new Firebase('https://ta-divshot-test.firebaseio.com/');
        myDataRef.child("visits").once('value', function(snapshot) {
          var exists = (snapshot.val() !== null);
          
          if(!exists){
            myDataRef.set({"visits":0});
          } 
        }*/
        /*
        var visits;
        myDataRef.child("visits").once("value", function(snapshot) {
          visits = snapshot.val();
          newvisits = visits+1
          alert(visits);
          myDataRef.update({"visits": newvisits});
        }); 
        */
        //$('#visitCount').text(visits);
      });
    </script>
    <h1>Testing Firebase take 10: checking if visits exists and 
initializing</h1>
    Number of visits= <div id='visitCount'></div>
  </body>
</html> 
